{% extends 'layout/layout.html' %} 
{% block content %}

<div class="grid grid-cols-1 lg:grid-cols-12 gap-6 mt-6">
  <!-- Earning Static start -->
  <div class="lg:col-span-12 2xl:col-span-8">
    <div class="card h-full rounded-lg border-0">
      <div class="card-body p-6">
        <div class="flex items-center flex-wrap gap-2 justify-between">
          <div class="flex-1 text-center">
            <h6 class="mb-2 font-bold text-lg">
              Last 15 days Vise Business Statistics
            </h6>
          </div>
          <div>
            <select
              class="form-select form-select-sm w-auto bg-white dark:bg-neutral-700 border text-secondary-light"
            >
              <option>Yearly</option>
              <option>Monthly</option>
              <option>Weekly</option>
              <option>Today</option>
            </select>
          </div>
        </div>

        <div class="mt-5 flex justify-center flex-wrap gap-3">
          <div
            class="card px-4 py-2 shadow-2 rounded-lg border-gray-200 dark:border-neutral-600 h-full bg-gradient-to-l from-primary-600/10 to-bg-white"
          >
            <div class="card-body p-0">
              <div class="flex flex-wrap items-center justify-between">
                <div class="flex items-center">
                  <p class="font-semibold">Payment Gate. Business</p>
                  <span
                    class="w-[28px] h-[28px] shrink-0 text-black flex justify-center items-center rounded-full px-2"
                  >
                    <iconify-icon
                      icon="garden:chevron-double-right-fill-12"
                      class="icon"
                    ></iconify-icon>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div
            class="card px-4 py-2 shadow-2 rounded-lg border-gray-200 dark:border-neutral-600 h-full bg-gradient-to-l from-primary-600/10 to-bg-white"
          >
            <div class="card-body p-0">
              <div class="flex flex-wrap items-center justify-between">
                <div class="flex items-center">
                  <p class="font-semibold">E-commerce Business</p>
                  <span
                    class="w-[28px] h-[28px] shrink-0 text-black flex justify-center items-center rounded-full px-2"
                  >
                    <iconify-icon
                      icon="garden:chevron-double-right-fill-12"
                      class="icon"
                    ></iconify-icon>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div
            class="card px-4 py-2 shadow-2 rounded-lg border-gray-200 dark:border-neutral-600 h-full bg-gradient-to-l from-primary-600/10 to-bg-white"
          >
            <div class="card-body p-0">
              <div class="flex flex-wrap items-center justify-between">
                <div class="flex items-center">
                  <p class="font-semibold">Online Banking</p>
                  <span
                    class="w-[28px] h-[28px] shrink-0 text-black flex justify-center items-center rounded-full px-2"
                  >
                    <iconify-icon
                      icon="garden:chevron-double-right-fill-12"
                      class="icon"
                    ></iconify-icon>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div
            class="card px-4 py-2 shadow-2 rounded-lg border-gray-200 dark:border-neutral-600 h-full bg-gradient-to-l from-primary-600/10 to-bg-white"
          >
            <div class="card-body p-0">
              <div class="flex flex-wrap items-center justify-between">
                <div class="flex items-center">
                  <p class="font-semibold">Investment Portal</p>
                  <span
                    class="w-[28px] h-[28px] shrink-0 text-black flex justify-center items-center rounded-full px-2"
                  >
                    <iconify-icon
                      icon="garden:chevron-double-right-fill-12"
                      class="icon"
                    ></iconify-icon>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div
            class="card px-4 py-2 shadow-2 rounded-lg border-gray-200 dark:border-neutral-600 h-full bg-gradient-to-l from-primary-600/10 to-bg-white"
          >
            <div class="card-body p-0">
              <div class="flex flex-wrap items-center justify-between">
                <div class="flex items-center">
                  <p class="font-semibold">Mobile Payments</p>
                  <span
                    class="w-[28px] h-[28px] shrink-0 text-black flex justify-center items-center rounded-full px-2"
                  >
                    <iconify-icon
                      icon="garden:chevron-double-right-fill-12"
                      class="icon"
                    ></iconify-icon>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <div
            class="card px-4 py-2 shadow-2 rounded-lg border-gray-200 dark:border-neutral-600 h-full bg-gradient-to-l from-primary-600/10 to-bg-white"
          >
            <div class="card-body p-0">
              <div class="flex flex-wrap items-center justify-between">
                <div class="flex items-center">
                  <p class="font-semibold">Crypto Exchange</p>
                  <span
                    class="w-[28px] h-[28px] shrink-0 text-black flex justify-center items-center rounded-full px-2"
                  >
                    <iconify-icon
                      icon="garden:chevron-double-right-fill-12"
                      class="icon"
                    ></iconify-icon>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="barChart"></div>
      </div>
    </div>
  </div>
  <!-- Earning Static End -->
  
  <!-- Campaign Static start -->
  <div class="lg:col-span-12 2xl:col-span-4">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
      <div class="lg:col-span-6 2xl:col-span-12 col-xxl-12 col-sm-6">
        <div class="card h-full rounded-lg border-0">
          <div class="card-body p-6">
            <!-- Header -->
            <div class="flex items-center flex-wrap gap-2 justify-between mb-5">
              <h6 class="mb-0 font-bold text-lg">My Cards</h6>
              <a
                href="#"
                class="border border-primary-600 text-primary-600 hover:text-white hover:bg-primary-600 inline-flex items-center gap-2 text-sm px-3 py-2 rounded transition"
              >
                <iconify-icon
                  icon="ph:plus-circle"
                  class="icon text-lg"
                ></iconify-icon>
                Add Card
              </a>
            </div>

            <!-- AUTO TRANSITION CARD SLIDER -->
            <div class="relative h-[250px]">
              <!-- Cards Container - No arrows needed -->
              <div class="h-full overflow-hidden rounded-2xl">
                <div id="cardSliderTrack" class="flex h-full transition-transform duration-500 ease-in-out">
                  
                  <!-- Card 1 - Blue Visa -->
                  <div class="w-full flex-shrink-0">
                    <div class="h-full rounded-2xl p-6 text-white shadow-xl" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                      <div class="flex flex-col justify-between h-full">
                        <!-- Top -->
                        <div class="flex justify-between items-start">
                          <h3 class="text-xl font-bold">Visa Card</h3>
                          <div class="bg-white/20 px-3 py-1 rounded text-sm font-bold">VISA</div>
                        </div>
                        
                        <!-- Middle -->
                        <div class="my-4">
                          <p class="text-xs opacity-75 mb-2">Credit Card Number</p>
                          <h2 class="text-2xl font-mono font-bold tracking-wider">2356 9854 3652 5612</h2>
                        </div>
                        
                        <!-- Bottom -->
                        <div class="flex justify-between">
                          <div>
                            <p class="text-xs opacity-75">Name</p>
                            <p class="font-semibold">Arlene McCoy</p>
                          </div>
                          <div>
                            <p class="text-xs opacity-75">Expires</p>
                            <p class="font-semibold">05/26</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Card 2 - Dark MasterCard -->
                  <div class="w-full flex-shrink-0">
                    <div class="h-full rounded-2xl p-6 text-white shadow-xl" style="background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);">
                      <div class="flex flex-col justify-between h-full">
                        <!-- Top -->
                        <div class="flex justify-between items-start">
                          <h3 class="text-xl font-bold">Master Card</h3>
                          <div class="flex space-x-1">
                            <div class="w-6 h-6 bg-red-500 rounded-full"></div>
                            <div class="w-6 h-6 bg-yellow-400 rounded-full -ml-3"></div>
                          </div>
                        </div>
                        
                        <!-- Middle -->
                        <div class="my-4">
                          <p class="text-xs opacity-75 mb-2">Credit Card Number</p>
                          <h2 class="text-2xl font-mono font-bold tracking-wider">1234 5678 9012 3456</h2>
                        </div>
                        
                        <!-- Bottom -->
                        <div class="flex justify-between">
                          <div>
                            <p class="text-xs opacity-75">Name</p>
                            <p class="font-semibold">John Doe</p>
                          </div>
                          <div>
                            <p class="text-xs opacity-75">Expires</p>
                            <p class="font-semibold">12/27</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Card 3 - Green Amex -->
                  <div class="w-full flex-shrink-0">
                    <div class="h-full rounded-2xl p-6 text-white shadow-xl" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                      <div class="flex flex-col justify-between h-full">
                        <!-- Top -->
                        <div class="flex justify-between items-start">
                          <h3 class="text-xl font-bold">American Express</h3>
                          <div class="bg-white/20 px-3 py-1 rounded text-sm font-bold">AMEX</div>
                        </div>
                        
                        <!-- Middle -->
                        <div class="my-4">
                          <p class="text-xs opacity-75 mb-2">Credit Card Number</p>
                          <h2 class="text-2xl font-mono font-bold tracking-wider">9876 5432 1098 7654</h2>
                        </div>
                        
                        <!-- Bottom -->
                        <div class="flex justify-between">
                          <div>
                            <p class="text-xs opacity-75">Name</p>
                            <p class="font-semibold">Jane Smith</p>
                          </div>
                          <div>
                            <p class="text-xs opacity-75">Expires</p>
                            <p class="font-semibold">08/25</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <!-- Dots -->
            <div class="flex justify-center mt-4 space-x-2">
              <button class="card-dot w-3 h-3 rounded-full bg-blue-500" data-slide="0"></button>
              <button class="card-dot w-3 h-3 rounded-full bg-gray-300" data-slide="1"></button>
              <button class="card-dot w-3 h-3 rounded-full bg-gray-300" data-slide="2"></button>
            </div>
            
          </div>
        </div>
      </div>

      <!-- Customer Overview Section -->
      <div class="lg:col-span-6 2xl:col-span-12 col-xxl-12 col-sm-6">
        <div class="card h-full rounded-lg border-0 overflow-hidden">
          <div class="card-body p-6">
            <div class="flex items-center flex-wrap gap-2 justify-between">
              <h6 class="mb-2 font-bold text-lg">Customer Overview</h6>
              <div class="">
                <select
                  class="form-select form-select-sm w-auto bg-white dark:bg-neutral-700 border text-secondary-light"
                >
                  <option>Yearly</option>
                  <option>Monthly</option>
                  <option>Weekly</option>
                  <option>Today</option>
                </select>
              </div>
            </div>

            <div class="flex flex-wrap items-center mt-4">
              <ul class="shrink-0">
                <li class="flex items-center gap-2 mb-7">
                  <span class="w-3 h-3 rounded-full bg-success-600"></span>
                  <span class="text-secondary-light text-sm font-medium">Total: 400</span>
                </li>
                <li class="flex items-center gap-2 mb-7">
                  <span class="w-3 h-3 rounded-full bg-warning-600"></span>
                  <span class="text-secondary-light text-sm font-medium">New: 400</span>
                </li>
                <li class="flex items-center gap-2">
                  <span class="w-3 h-3 rounded-full bg-primary-600"></span>
                  <span class="text-secondary-light text-sm font-medium">Active: 1400</span>
                </li>
              </ul>
              <div
                id="donutChart"
                class="grow apexcharts-tooltip-z-none title-style circle-none"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- AUTO TRANSITION SLIDER JAVASCRIPT -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Starting Auto Card Slider...');
    
    // Get elements
    const track = document.getElementById('cardSliderTrack');
    const dots = document.querySelectorAll('.card-dot');
    
    // Check if elements exist
    if (!track || !dots.length) {
        console.error('Slider elements not found!');
        return;
    }
    
    console.log('All elements found, initializing auto slider...');
    
    // Slider state
    let currentSlide = 0;
    const totalSlides = 3;
    let autoSlideInterval;
    let isAnimating = false;
    
    // Update slider position
    function updateSlider() {
        if (isAnimating) return;
        isAnimating = true;
        
        const translateX = -(currentSlide * 100);
        track.style.transform = `translateX(${translateX}%)`;
        console.log(`Auto moving to slide ${currentSlide}, translateX: ${translateX}%`);
        
        // Update dots
        dots.forEach((dot, index) => {
            if (index === currentSlide) {
                dot.classList.remove('bg-gray-300');
                dot.classList.add('bg-blue-500');
            } else {
                dot.classList.remove('bg-blue-500');
                dot.classList.add('bg-gray-300');
            }
        });
        
        setTimeout(() => {
            isAnimating = false;
        }, 500);
    }
    
    // Next slide (auto)
    function nextSlide() {
        if (isAnimating) return;
        currentSlide = (currentSlide + 1) % totalSlides;
        updateSlider();
        console.log('Auto transition to slide:', currentSlide);
    }
    
    // Start auto slide
    function startAutoSlide() {
        autoSlideInterval = setInterval(() => {
            nextSlide();
        }, 3000); // Auto transition every 3 seconds
        console.log('Auto slide started - transitions every 3 seconds');
    }
    
    // Stop auto slide
    function stopAutoSlide() {
        if (autoSlideInterval) {
            clearInterval(autoSlideInterval);
            autoSlideInterval = null;
            console.log('Auto slide stopped');
        }
    }
    
    // Restart auto slide
    function restartAutoSlide() {
        stopAutoSlide();
        setTimeout(() => {
            startAutoSlide();
        }, 5000); // Resume after 5 seconds
    }
    
    // Dot clicks (optional manual control)
    dots.forEach((dot, index) => {
        dot.addEventListener('click', (e) => {
            e.preventDefault();
            if (isAnimating) return;
            
            currentSlide = index;
            updateSlider();
            console.log('Manual dot clicked, slide:', currentSlide);
            
            // Temporarily stop auto slide, then restart
            restartAutoSlide();
        });
    });
    
    // Touch support (optional manual control)
    let startX = 0;
    track.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
        stopAutoSlide(); // Stop auto slide on touch
    });
    
    track.addEventListener('touchend', (e) => {
        const endX = e.changedTouches[0].clientX;
        const diff = startX - endX;
        
        if (Math.abs(diff) > 50) {
            if (diff > 0) {
                // Swipe left - next slide
                currentSlide = (currentSlide + 1) % totalSlides;
            } else {
                // Swipe right - previous slide
                currentSlide = currentSlide === 0 ? totalSlides - 1 : currentSlide - 1;
            }
            updateSlider();
            console.log('Touch swipe to slide:', currentSlide);
        }
        
        // Restart auto slide after touch
        restartAutoSlide();
    });
    
    // Pause auto slide on hover
    track.addEventListener('mouseenter', () => {
        stopAutoSlide();
        console.log('Auto slide paused on hover');
    });
    
    // Resume auto slide when mouse leaves
    track.addEventListener('mouseleave', () => {
        startAutoSlide();
        console.log('Auto slide resumed');
    });
    
    // Initialize
    updateSlider();
    startAutoSlide();
    
    console.log('Auto Card Slider initialized successfully!');
    console.log('Features: Auto transition (3s), Pause on hover, Touch control, Dot control');
});
</script>

{% endblock %}